{
    "Class": "Texture",
    "FontColor": "#ffffff",
    "Group": "Noises",
    "Name": "Fractional Brownian Motion",
    "Properties": [
        {
            "CName": "seed",
            "Tag": "Seed",
            "Type": "float",
            "Val": {
                "default": 100
            }
        },
        {
            "CName": "_s",
            "Tag": "Scale",
            "Type": "float",
            "Val": {
                "default": 1,
                "min": 0
            }
        }
    ],
    "Sources": [
        {
            "Name": "_out",
            "Type": "Grayscale"
        }
    ],
    "TitleColor": "#0055ff",
    "Value": "#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))\n#define hash21(p) fract(sin(dot(p,vec2(127.1,311.7)))* seed * 437.585453123)\nfloat noise2(vec2 p) {\n    vec2 i = floor(p);\n    vec2 f = fract(p); f = f*f*(3.-2.*f); // smoothstep\n\n    float v= mix( mix(hash21(i+vec2(0,0)),hash21(i+vec2(1,0)),f.x),\n                  mix(hash21(i+vec2(0,1)),hash21(i+vec2(1,1)),f.x), f.y);\n\treturn v;\n}\n\nvoid main() {vec2 p = sv_texc*_s;\n    float v = 0.,  a = .5;\n    mat2 R = rot(.37);\n\n    for (int i = 0; i < 9; i++, p*=2.,a/=2.) \n        p *= R,\n        v += a * noise2(p);\n\n    _out = vec4(vec3(v), 1.0);\n}"
}
